---
import CommonHead from "@/components/common-head.astro";
import CommonBody from "@/components/common-body.astro";
import ResumePage from "@/components/resume-page";
import Navbar from "@/components/navbar";
import "@/styles/global.css";

import { initI18n, extractResumeTranslations, extractNavbarTranslations } from "@/i18n";
import { getResumeData } from "@/data/get-resume-data";

const { language, t } = initI18n(Astro);

const pageTitle = t("meta.title");
const pageDescription = t("meta.description");
const resumeTranslations = extractResumeTranslations(t);
const navbarTranslations = extractNavbarTranslations(t);
const resumeData = getResumeData(t);
---

<html lang={language}>
  <head>
    <CommonHead title={pageTitle} description={pageDescription} lang={language} />
    <script is:inline>
      // Force white theme for resume page
      (function () {
        document.documentElement.classList.remove("dark");
        localStorage.setItem("theme", "light");
      })();
    </script>
  </head>
  <body>
    <CommonBody lang={language} />
    <ResumePage client:idle lang={language} data={resumeData} translations={resumeTranslations} />
    <Navbar client:idle lang={language} translations={navbarTranslations} />
  </body>
</html>
